import{_ as k,r as v,o as c,c as d,a as o,d as u,f as p,D as a,t as h,H as T,M as f,e as L,B as I,b as P,A as y,k as D}from"./js/_plugin-vue_export-helper.a81c6319.js";import{l as M}from"./js/index.251e7289.js";import{l as O}from"./js/index.fae5bbc8.js";import{l as j}from"./js/index.0b123ab1.js";import{h as z,t as H,T as R}from"./js/postContent.f08c6962.js";import{e as b}from"./js/elemLoaded.9a6eb745.js";import{a as x,g as A,s as E}from"./js/index.4dbecc01.js";import{a as w,m as S}from"./js/vuex.esm-bundler.55d3d5b3.js";import"./js/default-i18n.0e8bc810.js";import{u as N,T as q}from"./js/TruSeoScore.1eab6bb1.js";import"./js/WpTable.3e09f0c1.js";import"./js/constants.e56e1512.js";import{a as U,c as B}from"./js/Caret.19bf2275.js";import{t as V}from"./js/html.a669733f.js";import"./js/SaveChanges.c85e9ba4.js";import{C as F}from"./js/ScoreButton.6fcc0514.js";import"./js/client.e7a26247.js";import"./js/_commonjsHelpers.f84db168.js";import"./js/helpers.51e5fd9c.js";import"./js/cleanForSlug.d16f1e3a.js";import"./js/Index.3662e61b.js";import"./js/Row.d42459be.js";import"./js/RequiresUpdate.52f5acf2.js";import"./js/Index.048705a6.js";const G={setup(){const{strings:s}=N();return{composableStrings:s}},components:{CoreScoreButton:F,SvgCircleCheck:U,SvgCircleClose:B},mixins:[q],props:{post:Object,index:Number},data(){return{postId:null,columnName:null,value:null,title:null,titleParsed:null,postDescription:null,descriptionParsed:null,imageTitle:null,imageAltTag:null,showEditTitle:!1,showEditDescription:!1,showEditImageTitle:!1,showEditImageAltTag:!1,showTruSeo:!1,isSpecialPage:!1,strings:w(this.composableStrings,{title:this.$t.__("Title:",this.$td),description:this.$t.__("Description:",this.$td),imageTitle:this.$t.__("Image Title:",this.$td),imageAltTag:this.$t.__("Image Alt Tag:",this.$td),edit:this.$t.__("Edit",this.$td),save:this.$t.__("Save",this.$td),cancel:this.$t.__("Cancel",this.$td),wait:this.$t.__("Please wait...",this.$td)})}},computed:{...S(["options","currentPost"])},methods:{save(){this.showEditTitle=!1,this.showEditDescription=!1,this.post.title=this.title,this.post.description=this.postDescription,this.$http.post(this.$links.restUrl("postscreen")).send({postId:this.post.id,title:this.post.title,description:this.post.description}).then(s=>{this.titleParsed=s.body.title,this.descriptionParsed=s.body.description,this.post.titleParsed=s.body.title,this.post.descriptionParsed=s.body.description;const e=window.aioseo.posts;e[this.index]=this.post,x(this.$.appContext.app,{posts:e}),this.$root._data.screen.base!=="upload"&&this.runAnalysis(this.post.id)}).catch(s=>{console.error(`Unable to update post with ID ${this.post.id}: ${s}`)})},saveImage(){this.showEditImageTitle=!1,this.showEditImageAltTag=!1,this.post.title=this.title,this.post.description=this.postDescription,this.post.imageTitle=this.imageTitle,this.post.imageAltTag=this.imageAltTag,this.$http.post(this.$links.restUrl("postscreen")).send({postId:this.post.id,isMedia:!0,title:this.post.title,description:this.post.description,imageTitle:this.post.imageTitle,imageAltTag:this.post.imageAltTag}).then(()=>{}).catch(s=>{console.error(`Unable to update attachment with ID ${this.post.id}: ${s}`)})},cancel(){this.value=this.post.value,this.showEditTitle=!1,this.showEditDescription=!1,this.showEditImageTitle=!1,this.showEditImageAltTag=!1},editTitle(){this.showEditTitle=!0},editDescription(){this.showEditDescription=!0},editImageTitle(){this.showEditImageTitle=!0},editImageAlt(){this.showEditImageAltTag=!0},truncate:V,updatePostTitle(s,e){const l=document.getElementById(`post-${s}`);if(!l)return;const g=l.getElementsByClassName("title")[0].getElementsByTagName("a")[0];if(!g)return;const t=g.getElementsByTagName("span")[0];g.innerText=e,g.prepend(t)}},mounted(){this.postId=this.post.id,this.columnName=this.post.columnName,this.value=this.post.value,this.imageTitle=this.post.imageTitle,this.imageAltTag=this.post.imageAltTag,this.isSpecialPage=this.post.isSpecialPage,this.title=this.post.title||this.post.defaultTitle,this.titleParsed=this.post.titleParsed,this.postDescription=this.post.description||this.post.defaultDescription,this.descriptionParsed=this.post.descriptionParsed},async created(){const{options:s,currentPost:e,tags:l}=await A(this.$.appContext.app);this.$store.state.options=w({...this.$store.state.options},{...s}),this.$store.state.currentPost=w({...this.$store.state.currentPost},{...e}),this.$store.state.tags=w({...this.$store.state.tags},{...l}),this.showTruSeo=z()}},J={key:0,class:"edit-row"},K={key:1,class:"edit-row edit-title"},Q=["title"],W=["id"],X={key:2,class:"edit-row"},Y=["title"],Z=["title"],tt={key:3,class:"edit-row edit-description"},et=["title"],st=["id"],it={key:4,class:"edit-row"},ot=["title"],nt=["title"],lt={key:5,class:"edit-row edit-image-title"},rt=["title"],at=["id"],ct={key:6,class:"edit-row"},dt=["title"],ut=["title"],pt={key:7,class:"edit-row edit-image-alt"},ht=["title"],mt=["id"],gt={key:8,class:"edit-row"},_t=["title"],wt=["title"];function vt(s,e,l,g,t,i){const _=v("core-score-button"),m=v("svg-circle-check"),r=v("svg-circle-close");return c(),d("div",{class:I(["aioseo-details-column",{editing:t.showEditTitle||t.showEditDescription||t.showEditImageTitle||t.showEditImageAltTag}])},[o("div",null,[this.$root._data.screen.base==="edit"&&t.showTruSeo&&this.$allowed("aioseo_page_analysis")&&!t.isSpecialPage?(c(),d("div",J,[u(_,{score:this.post.value,postId:t.postId},null,8,["score","postId"])])):p("",!0),this.$allowed("aioseo_page_general_settings")?(c(),d("div",K,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[0]||(e[0]=a((...n)=>i.editTitle&&i.editTitle(...n),["prevent"]))},null,8,Q),o("strong",null,h(t.strings.title)+" ",1),o("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},h(i.truncate(t.titleParsed,100)),9,W)])):p("",!0),t.showEditTitle?(c(),d("div",X,[T(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=n=>t.title=n),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[f,t.title]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[2]||(e[2]=a((...n)=>i.save&&i.save(...n),["prevent"])),title:t.strings.save},[u(m,{width:"20"})],8,Y),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[3]||(e[3]=a((...n)=>i.cancel&&i.cancel(...n),["prevent"])),title:t.strings.cancel},[u(r,{width:"20"})],8,Z)])):p("",!0),this.$allowed("aioseo_page_general_settings")?(c(),d("div",tt,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[4]||(e[4]=a((...n)=>i.editDescription&&i.editDescription(...n),["prevent"]))},null,8,et),o("strong",null,h(t.strings.description)+" ",1),o("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},h(i.truncate(t.descriptionParsed)),9,st)])):p("",!0),t.showEditDescription?(c(),d("div",it,[T(o("textarea",{"onUpdate:modelValue":e[5]||(e[5]=n=>t.postDescription=n),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[f,t.postDescription]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[6]||(e[6]=a((...n)=>i.save&&i.save(...n),["prevent"])),title:t.strings.save},[u(m,{width:"20"})],8,ot),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[7]||(e[7]=a((...n)=>i.cancel&&i.cancel(...n),["prevent"])),title:t.strings.cancel},[u(r,{width:"20"})],8,nt)])):p("",!0),L(s.$slots,"default"),this.$root._data.screen.base==="upload"&&l.post.showMedia?(c(),d("div",lt,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[8]||(e[8]=a((...n)=>i.editImageTitle&&i.editImageTitle(...n),["prevent"]))},null,8,rt),o("strong",null,h(t.strings.imageTitle),1),o("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},h(t.imageTitle),9,at)])):p("",!0),t.showEditImageTitle?(c(),d("div",ct,[T(o("textarea",{"onUpdate:modelValue":e[9]||(e[9]=n=>t.imageTitle=n),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[f,t.imageTitle]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[10]||(e[10]=a((...n)=>i.saveImage&&i.saveImage(...n),["prevent"])),title:t.strings.save},[u(m,{width:"20"})],8,dt),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[11]||(e[11]=a((...n)=>i.cancel&&i.cancel(...n),["prevent"])),title:t.strings.cancel},[u(r,{width:"20"})],8,ut)])):p("",!0),this.$root._data.screen.base==="upload"&&l.post.showMedia?(c(),d("div",pt,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[12]||(e[12]=a((...n)=>i.editImageAlt&&i.editImageAlt(...n),["prevent"]))},null,8,ht),o("strong",null,h(t.strings.imageAltTag),1),o("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},h(t.imageAltTag),9,mt)])):p("",!0),t.showEditImageAltTag?(c(),d("div",gt,[T(o("textarea",{"onUpdate:modelValue":e[13]||(e[13]=n=>t.imageAltTag=n),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[f,t.imageAltTag]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[14]||(e[14]=a((...n)=>i.saveImage&&i.saveImage(...n),["prevent"])),title:t.strings.save},[u(m,{width:"20"})],8,_t),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[15]||(e[15]=a((...n)=>i.cancel&&i.cancel(...n),["prevent"])),title:t.strings.cancel},[u(r,{width:"20"})],8,wt)])):p("",!0)])],2)}const Tt=k(G,[["render",vt]]),ft={components:{CorePostColumn:Tt},props:{post:Object,index:Number}};function kt(s,e,l,g,t,i){const _=v("core-post-column");return c(),P(_,{post:l.post,index:l.index},null,8,["post","index"])}const C=k(ft,[["render",kt]]),Pt={components:{PostColumn:C,PostColumnLite:C},props:{post:Object,index:Number}};function Et(s,e,l,g,t,i){const _=v("PostColumn"),m=v("PostColumnLite");return c(),d("div",null,[s.$isPro?(c(),P(_,{key:0,post:l.post,index:l.index},null,8,["post","index"])):p("",!0),s.$isPro?p("",!0):(c(),P(m,{key:1,post:l.post,index:l.index},null,8,["post","index"]))])}const Ct=k(Pt,[["render",Et]]);const It={setup(){const{strings:s}=N();return{composableStrings:s}},components:{SvgCircleCheck:U,SvgCircleClose:B},mixins:[q],props:{term:Object,index:Number},data(){return{termId:null,columnName:null,title:null,titleParsed:null,termDescription:null,descriptionParsed:null,showEditTitle:!1,showEditDescription:!1,showTruSeo:!1,strings:w(this.composableStrings,{title:this.$t.__("Title:",this.$td),description:this.$t.__("Description:",this.$td),edit:this.$t.__("Edit",this.$td),save:this.$t.__("Save",this.$td),cancel:this.$t.__("Cancel",this.$td),wait:this.$t.__("Please wait...",this.$td)})}},computed:{...S(["options","currentPost"])},methods:{save(){this.showEditTitle=!1,this.showEditDescription=!1,this.term.title=this.title,this.term.description=this.termDescription,this.$http.post(this.$links.restUrl("termscreen")).send({termId:this.term.id,title:this.term.title,description:this.term.description}).then(s=>{this.titleParsed=s.body.title,this.descriptionParsed=s.body.description,this.term.titleParsed=s.body.title,this.term.descriptionParsed=s.body.description;const e=window.aioseo.terms;e[this.index]=this.term,x(this.$.appContext.app,{terms:e})}).catch(s=>{console.error(`Unable to update term with ID ${this.term.id}: ${s}`)})},cancel(){this.showEditTitle=!1,this.showEditDescription=!1},editTitle(){this.showEditTitle=!0},editDescription(){this.showEditDescription=!0},truncate:V},mounted(){this.termId=this.term.id,this.columnName=this.term.columnName,this.title=this.term.title,this.titleParsed=this.term.titleParsed,this.termDescription=this.term.description,this.descriptionParsed=this.term.descriptionParsed},async created(){const{options:s,currentPost:e,tags:l}=await A(this.$.appContext.app);this.$store.state.options=w({...this.$store.state.options},{...s}),this.$store.state.currentPost=w({...this.$store.state.currentPost},{...e}),this.$store.state.tags=w({...this.$store.state.tags},{...l}),this.showTruSeo=H()}},yt={class:"edit-row edit-title"},Dt=["title"],bt=["id"],xt={key:0,class:"edit-row"},At=["title"],St=["title"],Nt={class:"edit-row edit-description"},qt=["title"],Ut=["id"],Bt={key:1,class:"edit-row"},Vt=["title"],$t=["title"];function Lt(s,e,l,g,t,i){const _=v("svg-circle-check"),m=v("svg-circle-close");return c(),d("div",{class:I(["aioseo-details-column",{editing:t.showEditTitle||t.showEditDescription}])},[o("div",null,[o("div",yt,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[0]||(e[0]=a((...r)=>i.editTitle&&i.editTitle(...r),["prevent"]))},null,8,Dt),o("strong",null,h(t.strings.title),1),o("span",{id:`aioseo-${t.columnName}-${t.termId}-value`},h(i.truncate(t.titleParsed,100)),9,bt)]),t.showEditTitle?(c(),d("div",xt,[T(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=r=>t.title=r),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[f,t.title]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[2]||(e[2]=a((...r)=>i.save&&i.save(...r),["prevent"])),title:t.strings.save},[u(_,{width:"20"})],8,At),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[3]||(e[3]=a((...r)=>i.cancel&&i.cancel(...r),["prevent"])),title:t.strings.cancel},[u(m,{width:"20"})],8,St)])):p("",!0),o("div",Nt,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[4]||(e[4]=a((...r)=>i.editDescription&&i.editDescription(...r),["prevent"]))},null,8,qt),o("strong",null,h(t.strings.description),1),o("span",{id:`aioseo-${t.columnName}-${t.termId}-value`},h(i.truncate(t.descriptionParsed)),9,Ut)]),t.showEditDescription?(c(),d("div",Bt,[T(o("textarea",{"onUpdate:modelValue":e[5]||(e[5]=r=>t.termDescription=r),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[f,t.termDescription]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[6]||(e[6]=a((...r)=>i.save&&i.save(...r),["prevent"])),title:t.strings.save},[u(_,{width:"20"})],8,Vt),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[7]||(e[7]=a((...r)=>i.cancel&&i.cancel(...r),["prevent"])),title:t.strings.cancel},[u(m,{width:"20"})],8,$t)])):p("",!0)])],2)}const Mt=k(It,[["render",Lt]]),$=s=>(s=M(s),s=O(s),s=j(s),s.use(E),E._vm=s,s.config.globalProperties.$truSeo=new R,s),Ot=(s,e)=>{$(y({data(){return{screen:window.aioseo.screen}},render:()=>D(Ct)},{post:s,index:e})).mount(`#${s.columnName}-${s.id}`)};window.aioseo.posts&&window.aioseo.posts.forEach((s,e)=>{b(`#${s.columnName}-${s.id}`,`aioseoPostsTable-${s.id}`),document.addEventListener("animationstart",function(l){`aioseoPostsTable-${s.id}`===l.animationName&&Ot(s,e)},{passive:!0})});const jt=(s,e)=>{$(y({data(){return{screen:window.aioseo.screen}},render:()=>D(Mt)},{term:s,index:e})).mount(`#${s.columnName}-${s.id}`)};window.aioseo.terms&&window.aioseo.posts.length===0&&window.aioseo.terms.forEach((s,e)=>{b(`#${s.columnName}-${s.id}`,`aioseoTermsTable-${s.id}`),document.addEventListener("animationstart",function(l){`aioseoTermsTable-${s.id}`===l.animationName&&jt(s,e)},{passive:!0})});
